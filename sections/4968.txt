var __v="\u003cpre class='k-pre'\u003e在 父組件的 providers 中 指定 一個 共享的 服務\n父子 組件 通過 此 服務 來通信\u003c/pre\u003e\n\u003cstrong\u003eservice\u003c/strong\u003e\n\u003cpre class='prettyprint linenums'\u003eimport { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable()\nexport class MessageService {\n  private parent = new Subject\u0026lt;string\u0026gt;();\n  private child = new Subject\u0026lt;string\u0026gt;();\n\n  parentObservable = this.parent.asObservable();\n  childObservable = this.child.asObservable();\n\n  sendToParent(msg: string) {\n    this.parent.next(msg);\n  }\n  sendToChild(msg: string) {\n    this.child.next(msg);\n  }\n}\n\u003c/pre\u003e\n\u003cstrong\u003e父組件\u003c/strong\u003e\n\u003cpre class='prettyprint linenums'\u003eimport { Component, OnInit } from '@angular/core';\nimport { BeautyComponent } from './beauty/beauty.component';\nimport { MessageService } from './message.service';\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css'],\n  providers: [MessageService]\n})\nexport class HomeComponent implements OnInit {\n  val:string\n  constructor(private srv: MessageService) {\n  }\n  ngOnInit() {\n    // 訂閱 發送到 父節點的 消息\n    this.srv.parentObservable.subscribe(\n      msg =\u0026gt; {\n        console.log(\"home get \", msg)\n      }\n    );\n  }\n  send(val:string){\n    // 向 子節點 發送消息\n    this.srv.sendToChild(val);\n  }\n}\n\u003c/pre\u003e\n\u003cstrong\u003e子組件\u003c/strong\u003e\n\u003cpre class='prettyprint linenums'\u003eimport { Component, OnInit, Input } from '@angular/core';\nimport { MessageService } from '../message.service';\n@Component({\n  selector: 'app-beauty',\n  templateUrl: './beauty.component.html',\n  styleUrls: ['./beauty.component.css']\n})\nexport class BeautyComponent implements OnInit {\n  val:string\n  constructor(private srv: MessageService) {\n  }\n\n  ngOnInit() {\n    // 訂閱 發送到 子節點的 消息\n    this.srv.childObservable.subscribe(\n      msg =\u0026gt; {\n        console.log(\"child get \", msg)\n      }\n    );\n  }\n  send(val:string){\n    // 向 父節點 發送消息\n    this.srv.sendToParent(val);\n  }\n\n}\n\u003c/pre\u003e"