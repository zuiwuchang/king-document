var __v="\n\u003cpre class='prettyprint linenums'\u003e#include\u0026lt;boost\\thread.hpp\u0026gt;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n\tboost::shared_mutex sm;\n\t\n\t{\n\t\t//寫鎖定\n\t\tboost::unique_lock\u0026lt;boost::shared_mutex\u0026gt; wm(sm);\n\t\tassert(!sm.try_lock());\n\t\tassert(!sm.try_lock_shared());\n\t}\n\n\t{\n\t\t//多次讀鎖定\n\t\tboost::shared_lock\u0026lt;boost::shared_mutex\u0026gt; rm1(sm);\n\t\tboost::shared_lock\u0026lt;boost::shared_mutex\u0026gt; rm2(sm);\n\n\t\tassert(sm.try_lock_shared());\n\t\tsm.unlock_shared();\n\n\t\tassert(!sm.try_lock());\n\t}\n\t\n\tboost::unique_lock\u0026lt;boost::shared_mutex\u0026gt; wm(sm);\n\n\tstd::system(\"pause\");\n\treturn 0;\n}\u003c/pre\u003e"