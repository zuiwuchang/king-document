var __v="\n\u003cpre class='prettyprint linenums'\u003e#include \u0026lt;Windows.h\u0026gt;\n#include \u0026lt;iostream\u0026gt;\n\n#include \u0026lt;vlc/vlc.h\u0026gt;\n\nvoid showMediaInfo(libvlc_media_t* vlcMedia)\n{\n    //解析媒體格式\n    libvlc_media_parse(vlcMedia);\n\n    //返回 時長 ms\n    libvlc_time_t duration = libvlc_media_get_duration(vlcMedia);\n    std::cout\u0026lt;\u0026lt;\"times : \"\u0026lt;\u0026lt;duration\u0026lt;\u0026lt;\"ms\\n\";\n\n    //媒體包含 多個 視頻 音頻 以及其它 軌道 等信息\n    libvlc_media_track_t** tracks = NULL;\n    unsigned int n = libvlc_media_tracks_get(vlcMedia,\u0026amp;tracks);\n    for(unsigned int i=0;i\u0026lt;n;++i)\n    {\n        std::cout\u0026lt;\u0026lt;\"tracks[\"\u0026lt;\u0026lt;i\u0026lt;\u0026lt;\"]\"\u0026lt;\u0026lt;tracks[i]-\u0026gt;i_id\u0026lt;\u0026lt;\"\\n\";\n    }\n    //釋放 tracks\n    libvlc_media_tracks_release(tracks,n);\n}\nint main()\n{\n    //vlc 啟動 參數\n    const char * vlcArgs[] =\n    {\n        //\"-I\",\n        //\"dummy\",\n        \"--ignore-config\",\n        \"--extraintf=logger\",   //創建日誌文件\n        \"--verbose=2\",          //輸出日誌詳細度 [0,2]\n    };\n\n    //vlc 實例\n    libvlc_instance_t* vlcInstance = NULL;\n    //vlc 播放器\n    libvlc_media_player_t* vlcPlayer = NULL;\n    //vlc 媒體\n    libvlc_media_t* vlcMedia = NULL;\n\n\n    //創建 vlc 實例\n    vlcInstance = libvlc_new(sizeof(vlcArgs)/sizeof(vlcArgs[0]),vlcArgs);\n    if(vlcInstance)\n    {\n        // 创建一个VLC播放器\n        vlcPlayer = libvlc_media_player_new(vlcInstance);\n        if(vlcPlayer)\n        {\n            //設置 播放器 窗口\n            libvlc_media_player_set_hwnd(vlcPlayer,GetDesktopWindow());\n\n            //通過文件 創建一個 vlc 媒體\n            vlcMedia = libvlc_media_new_path(vlcInstance, \"d:\\\\mass effect.mp4\");\n            if(vlcMedia)\n            {\n                //可選的 獲取一些 媒體信息\n                showMediaInfo(vlcMedia);\n\n                //關聯 播放器 媒體\n                libvlc_media_player_set_media(vlcPlayer, vlcMedia);\n\n\n                //播放 媒體\n                if(!libvlc_media_player_play(vlcPlayer))\n                {\n\n                    //等待播放結束\n                    while(true)\n                    {\n                        Sleep(10);\n                        // 获取当前播放位置\n                        libvlc_time_t time = libvlc_media_player_get_time(vlcPlayer);\n                        printf(\"playing time : %lld ms\\n\", (__int64)(time));\n\n                        //獲取播放 狀態\n                        libvlc_state_t media_state = libvlc_media_get_state(vlcMedia);\n                        printf(\"state %d\\n\",media_state);\n                        if(media_state == libvlc_Ended || media_state == libvlc_Error)\n                        {\n                            break;\n                        }\n                    }\n                }\n                //停止播放\n                libvlc_media_player_stop(vlcPlayer);\n                //释放 vlc 媒體\n                libvlc_media_release(vlcMedia);\n            }\n            //释放 vlc 播放器\n            libvlc_media_player_release(vlcPlayer);\n        }\n        //释放 vlc 實例\n        libvlc_release(vlcInstance);\n    }\n    return 0;\n}\n\u003c/pre\u003e"