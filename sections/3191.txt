var __v="\n\u003cpre class='prettyprint linenums'\u003e//創建主緩衝區\nLPDIRECTSOUNDBUFFER  main_buffer;\nif(DS_OK != device-\u0026gt;CreateSoundBuffer(\u0026amp;dsbufferdesc,\u0026amp;main_buffer,0))\n{\n\tthrow dark::debug::wexception(L\"創建主要緩衝區失敗\");\n}\n\n//主緩衝區只能通過 SetFormat 設置 聲音格式屬性 且協作等級需要支持修改緩衝區格式\nWAVEFORMATEX wave_format;\nmemset(\u0026amp;wave_format,0,sizeof(WAVEFORMATEX));\nwave_format.wFormatTag\t\t\t=\tWAVE_FORMAT_PCM;\nwave_format.nChannels\t\t\t=\t2;\t\t\t//聲道數\nwave_format.nSamplesPerSec\t\t=\t44100;\t\t//採樣率為44.1Hz\t22050(22.05Hz)\nwave_format.wBitsPerSample\t\t=\t16;\t\t\t//採樣位數\n//採樣塊對齊大小\nwave_format.nBlockAlign\t\t\t=\t(wave_format.wBitsPerSample/8)*wave_format.nChannels;\n//計算平均每秒採樣字節數\nwave_format.nAvgBytesPerSec\t\t=\twave_format.nSamplesPerSec*wave_format.nBlockAlign;\n\n//設置緩衝區聲音屬性\nif(DS_OK !=main_buffer-\u0026gt;SetFormat(\u0026amp;wave_format))\n{\n\tthrow dark::debug::wexception(L\"設置主要緩聲音屬性失敗\");\n}\u003c/pre\u003e"