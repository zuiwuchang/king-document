var __v="\n\u003cpre class='prettyprint linenums'\u003e[Serializable]\npublic class Animal\n{\n    public int Lv;\n    public string Name;\n    [NonSerialized]\n    public int Random;\n\n    public override string ToString()\n    {\n        return String.Format(\"i'm {0},my lv is {1},random = {2}\", Name, Lv, Random);\n    }\n};\n\nclass Program\n{\n\n    static void Main(string[] args)\n    {\n        Animal cat = new Animal() { Lv = 9, Name = \"喵貓\", Random = 10 };\n        Console.WriteLine(cat);\n\n        //binary\n        System.Runtime.Serialization.Formatters.Binary.BinaryFormatter fmt = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();\n        MemoryStream ms1 = new MemoryStream();\n        \n        //序列化\n        fmt.Serialize(ms1, cat);\n        \n        //反序列化\n        ms1.Position = 0;\n        Animal cat1 = fmt.Deserialize(ms1) as Animal;\n        Console.WriteLine(cat1);\n\n\n\n        //xml\n        System.Xml.Serialization.XmlSerializer xml = new System.Xml.Serialization.XmlSerializer(typeof(Animal));\n        MemoryStream ms2 = new MemoryStream();\n\n        //序列化\n        xml.Serialize(ms2, cat);\n        Console.WriteLine(System.Text.Encoding.UTF8.GetString(ms2.GetBuffer()));\n\n        //反序列化\n        ms2.Position = 0;\n        Animal cat3 = xml.Deserialize(ms2) as Animal;\n        Console.WriteLine(cat3);\n\n        Console.WriteLine(\"press any key to exit\");\n        Console.ReadLine();\n    }\n   \n}\u003c/pre\u003e"