var __v="\u003cpre class='k-pre'\u003e在 Wait 之前 Signal\n之後 在調用 Wait 時會發出 異常\n\n此時可以 增加一個 變量 來表示 是否已經 Signal過了 如果 沒有 才Wait\u003c/pre\u003e\n\u003cpre class='prettyprint linenums'\u003epackage main\n\nimport (\n\t\"log\"\n\t\"sync\"\n\t\"time\"\n)\n\nfunc main() {\n\tvar wg sync.WaitGroup\n\twg.Add(2)\n\n\tcond := sync.NewCond(\u0026amp;sync.Mutex{})\n\n\tcondition := false\n\tgo func() {\n\t\tcond.L.Lock()\n\t\tlog.Println(0)\n\t\t// 喚醒 等待的 goroutine\n\t\tcondition = true\n\t\tcond.Signal()\n\t\tlog.Println(1)\n\t\tcond.L.Unlock()\n\n\t\twg.Done()\n\t}()\n\n\tgo func() {\n\t\ttime.Sleep(time.Millisecond)\n\t\tcond.L.Lock()\n\t\tlog.Println(2)\n\t\tfor !condition {\n\t\t\tlog.Println(\"wait\")\n\t\t\tcond.Wait()\n\t\t}\n\t\tlog.Println(3)\n\t\tcond.L.Unlock()\n\t\twg.Done()\n\t}()\n\n\twg.Wait()\n\tlog.Println(\"end\")\n}\n\u003c/pre\u003e"