var __v="\n\u003cpre class='prettyprint linenums'\u003e//darkTaskBarIconEvent.h\n#ifndef DARKTASKBARICONEVENT_H\n#define DARKTASKBARICONEVENT_H\n\n#include \u0026lt;wx/event.h\u0026gt;\n\n//1 派生子類\nclass darkTaskBarIconEvent : public wxCommandEvent\n{\n    public:\n        darkTaskBarIconEvent();\n        virtual ~darkTaskBarIconEvent();\n\n        //2 實現 Clone\n        virtual wxEvent* Clone()const\n        {\n            return new darkTaskBarIconEvent(*this);\n        }\n    protected:\n    private:\n};\n\n//3 定義事件處理函數 簽名\ntypedef void (wxEvtHandler::*darkTaskBarIconEventHandler)(darkTaskBarIconEvent\u0026amp;);\n\n//4 聲明事件\nBEGIN_DECLARE_EVENT_TYPES()\n    DECLARE_EVENT_TYPE(darkEVT_TASKBAR_LEFT_DOWN,801)\nEND_DECLARE_EVENT_TYPES()\n\n//6 定義映射宏\n#define DARK_EVT_TASKBAR_LEFT_DOWN(fn)  \\\n    DECLARE_EVENT_TABLE_ENTRY(darkEVT_TASKBAR_LEFT_DOWN,    \\\n                                wxID_ANY,  \\\n                                wxID_ANY,   \\\n                                (wxObjectEventFunction)(wxEventFunction)(darkTaskBarIconEventHandler)\u0026amp;fn, \\\n                                (wxObject*)NULL),\n\n#endif // DARKTASKBARICONEVENT_H\n\n\n//darkTaskBarIconEvent.cpp\n#include \"darkTaskBarIconEvent.h\"\n\nDEFINE_EVENT_TYPE(darkEVT_TASKBAR_LEFT_DOWN)\n\ndarkTaskBarIconEvent::darkTaskBarIconEvent()\n{\n    //ctor\n}\n\ndarkTaskBarIconEvent::~darkTaskBarIconEvent()\n{\n    //dtor\n}\n\n\n\n//darkTaskBarIcon.h\n#ifndef DARKTASKBARICON_H\n#define DARKTASKBARICON_H\n\n#include \u0026lt;wx/taskbar.h\u0026gt;\n#include \u0026lt;wx/menu.h\u0026gt;\n#include\"darkTaskBarIconEvent.h\"\n\nclass darkTaskBarIcon : public wxTaskBarIcon\n{\n    public:\n        darkTaskBarIcon();\n        virtual ~darkTaskBarIcon();\n        inline void SetBarMenu(wxMenu* _menu)\n        {\n            menu_ = _menu;\n        }\n    protected:\n        wxMenu* menu_;\n\n        void OnRButtonDown(wxTaskBarIconEvent\u0026amp; event);\n        void OnLButtonDown(wxTaskBarIconEvent\u0026amp; event);\n        void OnDarkLButtonDown(darkTaskBarIconEvent\u0026amp; event);\n\n        DECLARE_EVENT_TABLE()\n};\n\n#endif // DARKTASKBARICON_H\n\n\n\n//darkTaskBarIcon.pp\n#include \"darkTaskBarIcon.h\"\n\nBEGIN_EVENT_TABLE(darkTaskBarIcon, wxTaskBarIcon)\n    EVT_TASKBAR_RIGHT_DOWN(darkTaskBarIcon::OnRButtonDown)\n    EVT_TASKBAR_LEFT_DOWN(darkTaskBarIcon::OnLButtonDown)\n    DARK_EVT_TASKBAR_LEFT_DOWN(darkTaskBarIcon::OnDarkLButtonDown)\nEND_EVENT_TABLE()\n\ndarkTaskBarIcon::darkTaskBarIcon()\n{\n    menu_ = NULL;\n}\n\ndarkTaskBarIcon::~darkTaskBarIcon()\n{\n    //dtor\n}\n\nvoid darkTaskBarIcon::OnRButtonDown(wxTaskBarIconEvent\u0026amp; event)\n{\n    PopupMenu(menu_);\n}\n\nvoid darkTaskBarIcon::OnLButtonDown(wxTaskBarIconEvent\u0026amp; event)\n{\n    darkTaskBarIconEvent e;\n    e.SetEventType(darkEVT_TASKBAR_LEFT_DOWN);\n    wxPostEvent(this,e);\n}\nvoid darkTaskBarIcon::OnDarkLButtonDown(darkTaskBarIconEvent\u0026amp; event)\n{\n    PopupMenu(menu_);\n}\u003c/pre\u003e"