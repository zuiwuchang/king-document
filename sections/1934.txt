var __v="\n\u003cpre class='prettyprint linenums'\u003e#include \u0026lt;Poco/Net/HTTPClientSession.h\u0026gt;\n#include \u0026lt;Poco/Net/HTTPRequest.h\u0026gt;\n#include \u0026lt;Poco/Net/HTTPResponse.h\u0026gt;\n#include \u0026lt;Poco/Net/HTMLForm.h\u0026gt;\n#include \u0026lt;Poco/StreamCopier.h\u0026gt;\n#include \u0026lt;Poco/URI.h\u0026gt;\n#include \u0026lt;Poco/Exception.h\u0026gt;\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n\ttry\n\t{\n\t\tconst Poco::URI uri(\"http://127.0.0.1:1102/123.html?id=12\");\n\n\t\t//創建會話\n\t\tPoco::Net::HTTPClientSession session(uri.getHost(),uri.getPort());\n\n\t\tstd::string path\t=\turi.getPathAndQuery();\n\t\t//創建請求 使用GET模式\n\t\tPoco::Net::HTTPRequest request(Poco::Net::HTTPRequest::HTTP_POST,path);\n\t\t\t\n\t\t//設置 http 頭信息\t(可選)\n\t\t{\n\t\t\t//設置 keep-alive\n\t\t\tsession.setKeepAlive(true);\n\t\t\trequest.setKeepAlive(true);\n\n\t\t\t//為請求設置 cookie \n\t\t\tPoco::Net::NameValueCollection name_value_c;\n\t\t\tname_value_c.add(\"c1\",\"v1\");\n\t\t\tname_value_c.add(\"c2\",\"v2\");\n\t\t\trequest.setCookies(name_value_c);\n\t\t\n\t\t\t//其他頭信息\n\t\t\trequest.set(\"User-Agent\",\"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:29.0) Gecko/20100101 Firefox/29.0\");\n\t\t\t//...\n\t\t}\n\n\t\t//設置超時時間 5 秒\n\t\tsession.setTimeout(Poco::Timespan(5,0));\n\n\t\t//設置form\n\t\tPoco::Net::HTMLForm form;\n\t\tform.set(\"id\", \"123\");\n\t\tform.set(\"password\", \"pass\");\n\t\tform.prepareSubmit(request);\n\t\t\t//form.setEncoding(Poco::Net::HTMLForm::ENCODING_MULTIPART);\n        \n\t\t//發出請求\n\t\tstd::ostream\u0026amp; ostream = session.sendRequest(request);\n\t\tform.write(ostream);\t\t\t//寫入form信息\n\n\t\t//獲取響應\n\t\tPoco::Net::HTTPResponse response;\n\t\tstd::istream\u0026amp; rs\t=\tsession.receiveResponse(response);\n\t\t\n\t\tstd::string str;\n\t\tPoco::StreamCopier::copyToString(rs,str);\n\t\t//Poco::StreamCopier::copyStream(rs,std::cout);\n\t}\n\tcatch(const Poco::Exception\u0026amp; e)\n\t{\n\t\tstd::cout\u0026lt;\u0026lt;e.displayText()\u0026lt;\u0026lt;std::endl;\n\t}\n\n\tstd::system(\"pause\");\n\treturn 0;\n}\u003c/pre\u003e"