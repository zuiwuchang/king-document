var __v="\n\u003cpre class='prettyprint linenums'\u003e#include \u0026lt;signal.h\u0026gt;\n#include \u0026lt;cstdlib\u0026gt;\n#include \u0026lt;iostream\u0026gt;\n#include \u0026lt;Windows.h\u0026gt;\nvoid handler(int sig)\n{\n\tstd::cout\u0026lt;\u0026lt;\"thread = \"\u0026lt;\u0026lt;::GetCurrentThreadId\u0026lt;\u0026lt;\"\\n\";\n\tstd::cout\u0026lt;\u0026lt;sig\u0026lt;\u0026lt;\"\\n\";\n\n\tif(sig == SIGTERM)\n\t{\n\t\texit(0);\n\t\treturn;\n\t}\n\t//重新註冊信號\n\tsignal(sig,handler);\n}\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n\tstd::cout\u0026lt;\u0026lt;\"thread = \"\u0026lt;\u0026lt;::GetCurrentThreadId\u0026lt;\u0026lt;\"\\n\";\n\n\t//註冊 要處理的信號\n\tsignal(SIGINT,handler);\t\t//通常是 ctrl + c\n\tsignal(SIGILL,handler);\n\tsignal(SIGFPE,handler);\n\tsignal(SIGSEGV,handler);\n\tsignal(SIGTERM,handler);\t//軟體退出 kill\n\tsignal(SIGBREAK,handler);\t//通常是 ctrl + break/pause /點擊了控制檯窗口的 關閉按鈕\n\tsignal(SIGABRT,handler);\t//調用了 abort 函數\n\t\n\n\t//發送一個信號\n\traise(SIGINT);\n\t\n\twhile(true)\n\t{\n\t\tSleep(1000);\n\t\traise(SIGTERM);\n\t}\n\n\treturn 0;\n}\u003c/pre\u003e"