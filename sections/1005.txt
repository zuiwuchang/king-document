var __v="\u003cpre class=\"prettyprint linenums\"\u003e@MultipartConfig\n@WebServlet(\"/ServletTest\")\n\npublic class ServletTest extends HttpServlet {\n\tprivate static final long serialVersionUID = 1L;\n       int x=0;\n \n \t//...\n    \n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\t\tPart part = request.getPart(\"filename\");\n\t\tString name\t=\tgetFileName(part);\n\t\t\n\t\t//當前項目路徑\n\t\tString path\t=\trequest.getSession().getServletContext().getRealPath(\"\");\n\t\t\n\t\tpath\t+=\t\"/image/\";\n\t\tpath\t+=\tname;\n\t\tsaveFile(path,part);\n\t}\n\t\n\t//獲取文件名\n\tprivate String getFileName(Part part)\n\t{\n\t\tString header\t=\tpart.getHeader(\"Content-Disposition\");\n\t\tString name\t=\theader.substring(header.indexOf(\"filename=\\\"\") + 10\n\t\t\t\t,header.lastIndexOf(\"\\\"\")\n\t\t\t\t);\n\t\treturn name;\n\t}\n\t//寫入到文件\n\tprivate void saveFile(String path,Part part)\n\t{\n\t\tInputStream in;\n\t\ttry {\n\t\t\tin = part.getInputStream();\n\t\t\tFileOutputStream out = new FileOutputStream(path);\n\t\t\tbyte[] buffer\t=\tnew byte[1024];\n\t\t\tint length\t=\t-1;\n\t\t\twhile((length = in.read(buffer))\t!=\t-1)\n\t\t\t{\n\t\t\t\tout.write(buffer,0, length);\n\t\t\t}\n\t\t\tin.close();\n\t\t\tout.close();\n\t\t} catch (IOException e) {\n\t\t\t// TODO Auto-generated catch block\n\t\t\te.printStackTrace();\n\t\t}\n\t\t\n\t}\n}\n\n\n//html\n\t\u0026lt;form method=\"post\" action=\"ServletTest\" name = \"index\" enctype='multipart/form-data'\u0026gt;\n\t文件名:\u0026lt;input type='file' name = 'filename'\u0026gt;\n\t\u0026lt;button type=\"submit\"\u0026gt;submit\u0026lt;/button\u0026gt;\t\n\t\u0026lt;/form\u0026gt;\u003c/pre\u003e"