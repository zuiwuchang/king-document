var __v="\n\u003cpre class='prettyprint linenums'\u003e#include\u0026lt;boost\\thread.hpp\u0026gt;\n\nvoid work_fun(const int n)\n{\n\ttry\n\t{\n\t\twhile(true)\n\t\t{\n\t\t\tboost::this_thread::sleep(boost::posix_time::seconds(n));\n\t\t}\n\t}\n\tcatch(boost::thread_interrupted\u0026amp;)\n\t{\n\t\tstd::cout\u0026lt;\u0026lt;\"thread is end\"\u0026lt;\u0026lt;std::endl;\n\t}\n}\nint _tmain(int argc, _TCHAR* argv[])\n{\n\tboost::function\u0026lt;void()\u0026gt; f\t=\tboost::bind(work_fun,1);\n\tboost::thread_group g;\n\tfor(unsigned int i=0;i\u0026lt;boost::thread::hardware_concurrency();++i)\n\t{\n\t\tg.create_thread(f);\n\t}\n\tboost::this_thread::sleep(boost::posix_time::seconds(2));\n\tg.interrupt_all();\n\tg.join_all();\n\n\tstd::system(\"pause\");\n\treturn 0;\n}\u003c/pre\u003e"