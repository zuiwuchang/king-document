var __v="\n\u003cpre class='prettyprint linenums'\u003epackage main\n\n/*#cgo LDFLAGS:\n#include \u0026lt;stdint.h\u0026gt;\ntypedef uintptr_t (__stdcall* show_ft)(char*,int);\nvoid Show(char* c,int n,show_ft f){\n\tf(c,n);\n}\n*/\nimport \"C\"\nimport (\n\t\"fmt\"\n\t\"reflect\"\n\t\"syscall\"\n\t\"unsafe\"\n)\n\nfunc main() {\n\ts := \"test\"\n\th := (*reflect.StringHeader)(unsafe.Pointer(\u0026amp;s))\n\tf := (*[0]byte)(unsafe.Pointer(syscall.NewCallback(Show)))\n\tC.Show(\n\t\t(*C.char)(unsafe.Pointer(h.Data)),\n\t\t(C.int)(h.Len),\n\t\tf,\n\t)\n}\nfunc Show(c *C.char, n int) uintptr {\n\tvar s string\n\th := (*reflect.StringHeader)(unsafe.Pointer(\u0026amp;s))\n\th.Data = uintptr(unsafe.Pointer(c))\n\th.Len = n\n\tfmt.Println(s)\n\treturn 0\n}\n\u003c/pre\u003e"