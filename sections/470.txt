var __v="\u003cpre class=\"prettyprint linenums\"\u003epackage main\n\nimport (\n\t\"bytes\"\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"io\"\n\t\"io/ioutil\"\n\t\"log\"\n\t\"mime/multipart\"\n\t\"net/http\"\n\t\"os\"\n)\n\ntype Info struct {\n\tFid       string\n\tUrl       string\n\tPublicUrl string\n\tCount     int\n}\n\nfunc main() {\n\tinfo := \u0026amp;Info{}\n\t/*e := GetVolume(info)\n\tif e!=nil{\n\t\tlog.Fatal(e)\n\t}*/\n\tinfo.Fid = \"3,0420491ad3\"\n\tinfo.Url = \"192.168.1.254:8080\"\n\tfile := \"1.jpg\"\n\te := PostFile(info, file)\n\tif e != nil {\n\t\tlog.Fatal(e)\n\t}\n}\n\n//POST 文件 example\nfunc PostFile(info *Info, file string) error {\n\t//打開文件\n\tf, e := os.Open(file)\n\tif e != nil {\n\t\treturn e\n\t}\n\tdefer f.Close()\n\t//創建body\n\tbody := \u0026amp;bytes.Buffer{}\n\n\t//創建 part\n\twriter := multipart.NewWriter(body)\n\t//Content-Disposition: form-data; name=\"file\"; filename=\"1.jpg\"\n\tpart, err := writer.CreateFormFile(\"file\", file)\n\tif err != nil {\n\t\treturn err\n\t}\n\t//複製 byte 數據\n\t_, err = io.Copy(part, f)\n\n\terr = writer.Close()\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t//創建 request 請求\n\turl := fmt.Sprintf(\"http://%v/%v\", info.Url, info.Fid)\n\trequest, e := http.NewRequest(\"POST\", url, body)\n\tif e != nil {\n\t\treturn e\n\t}\n\t//設置 Content-Type\n\trequest.Header.Set(\"Content-Type\", writer.FormDataContentType())\n\n\t//發送POST請求\n\tclient := \u0026amp;http.Client{}\n\tr, err := client.Do(request)\n\tif err != nil {\n\t\treturn nil\n\t}\n\n\t//處理 回傳結果\n\tb, e := ioutil.ReadAll(r.Body)\n\tif e != nil {\n\t\treturn e\n\t}\n\tfmt.Println(string(b))\n\n\treturn nil\n}\n\n//Get Example\nfunc GetVolume(info *Info) error {\n\tr, e := http.Get(\"http://192.168.1.254:9333/dir/assign\")\n\tif e != nil {\n\t\treturn e\n\t}\n\tb, e := ioutil.ReadAll(r.Body)\n\tif e != nil {\n\t\treturn e\n\t}\n\te = json.Unmarshal(b, \u0026amp;info)\n\tif e != nil {\n\t\treturn e\n\t}\n\treturn nil\n}\u003c/pre\u003e"