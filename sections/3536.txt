var __v="\n\u003cpre class='prettyprint linenums'\u003e#include \u0026lt;irrlicht.h\u0026gt;\n\n#ifdef _IRR_WINDOWS_\n#pragma comment(lib, \"Irrlicht.lib\")\n#endif\n\n//設置gui透明\nvoid setSkinTransparency(irr::s32 alpha, irr::gui::IGUISkin* skin);\nirr::gui::IGUIListBox* listbox_ptr;\n\nenum GUI_ID\n{\n\tGUI_BUTTON_EXIT_ID\n\t,GUI_BUTTON_NEW_WINDOW_ID\n\t,GUI_BUTTON_OPEN_FILE_ID\n\n\t,GUI_SCROLL_BAR_ID\n};\n\nclass MyEventReceiver : public irr::IEventReceiver\n{\nprivate:\n\tirr::IrrlichtDevice* device_ptr_;\npublic:\n\tMyEventReceiver(irr::IrrlichtDevice* device_ptr) \n\t{\n\t\tdevice_ptr_\t=\tdevice_ptr;\n\t}\n\n\tvirtual bool OnEvent(const irr::SEvent\u0026amp; event)\n\t{\n\t\tif (event.EventType == irr::EET_GUI_EVENT)\n\t\t{\n\t\t\tswitch(event.GUIEvent.EventType)\n\t\t\t{\n\t\t\tcase irr::gui::EGET_BUTTON_CLICKED:\n\t\t\t\t//按鈕被單擊\n\t\t\t\tif(GUI_BUTTON_EXIT_ID == event.GUIEvent.Caller-\u0026gt;getID())\n\t\t\t\t{\n\t\t\t\t\tdevice_ptr_-\u0026gt;closeDevice();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(GUI_BUTTON_NEW_WINDOW_ID == event.GUIEvent.Caller-\u0026gt;getID())\n\t\t\t\t{\n\t\t\t\t\tlistbox_ptr-\u0026gt;addItem(L\"new window\");\n\t\t\t\t\tirr::gui::IGUIWindow* window_ptr\t=\tdevice_ptr_-\u0026gt;getGUIEnvironment()-\u0026gt;addWindow(\n\t\t\t\t\t\tirr::core::rect\u0026lt;irr::s32\u0026gt;(100, 100, 300, 200)\n\t\t\t\t\t\t,false\n\t\t\t\t\t\t,L\"Test window\");\n\t\t\t\t\t\n\t\t\t\t\tdevice_ptr_-\u0026gt;getGUIEnvironment()-\u0026gt;addStaticText(L\"Please close me\"\n\t\t\t\t\t\t,irr::core::rect\u0026lt;irr::s32\u0026gt;(35,35,140,50)\n\t\t\t\t\t\t,true\n\t\t\t\t\t\t,false\n\t\t\t\t\t\t,window_ptr);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(GUI_BUTTON_OPEN_FILE_ID == event.GUIEvent.Caller-\u0026gt;getID())\n\t\t\t\t{\n\t\t\t\t\tlistbox_ptr-\u0026gt;addItem(L\"File open\");\n\t\t\t\t\t\n\t\t\t\t\tdevice_ptr_-\u0026gt;getGUIEnvironment()-\u0026gt;addFileOpenDialog(L\"Please choose a file.\", true, 0, -1, false);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase irr::gui::EGET_SCROLL_BAR_CHANGED:\n\t\t\t\t{\n\t\t\t\t\t//滾動條 滾動\n\t\t\t\t\tirr::gui::IGUIScrollBar* scrollbar_ptr\t=\t(irr::gui::IGUIScrollBar*)event.GUIEvent.Caller;\n\t\t\t\t\tirr::s32 pos\t=\tscrollbar_ptr-\u0026gt;getPos();\n\t\t\t\t\tsetSkinTransparency(pos, device_ptr_-\u0026gt;getGUIEnvironment()-\u0026gt;getSkin());\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase irr::gui::EGET_FILE_SELECTED:\n\t\t\t\t{\n\t\t\t\t\tirr::gui::IGUIFileOpenDialog* fiile_dialog_ptr\t=\t(irr::gui::IGUIFileOpenDialog*)event.GUIEvent.Caller;\n\t\t\t\t\tlistbox_ptr-\u0026gt;addItem(fiile_dialog_ptr-\u0026gt;getFileName());\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n};\n\n\nint main()\n{\n\n\tirr::IrrlichtDevice* device_ptr\t=\tirr::createDevice(irr::video::EDT_DIRECT3D9);\n\tif (!device_ptr)\n\t\treturn 1; // could not create selected driver.\n\n\tMyEventReceiver receiver(device_ptr);\n\tdevice_ptr-\u0026gt;setEventReceiver(\u0026amp;receiver);\n\t\n\tdevice_ptr-\u0026gt;setWindowCaption(L\"Irrlicht Engine - User Interface Demo\");\n\t//可以調整窗口大小\n\tdevice_ptr-\u0026gt;setResizable(true);\n\n\tirr::video::IVideoDriver* driver_ptr\t=\tdevice_ptr-\u0026gt;getVideoDriver();\n\tirr::gui::IGUIEnvironment* gui_ptr\t\t=\tdevice_ptr-\u0026gt;getGUIEnvironment();\n\n\tirr::gui::IGUISkin* skin = gui_ptr-\u0026gt;getSkin();\n\tirr::gui::IGUIFont* font = gui_ptr-\u0026gt;getFont(\"media/fonthaettenschweiler.bmp\");\n\n\tif (font)\n\t\tskin-\u0026gt;setFont(font);\n\tskin-\u0026gt;setFont(gui_ptr-\u0026gt;getBuiltInFont(), irr::gui::EGDF_TOOLTIP);\n\n\t//增加三個按鈕\n\tgui_ptr-\u0026gt;addButton(irr::core::rect\u0026lt;irr::s32\u0026gt;(10,240,110,240 + 32), 0, GUI_BUTTON_EXIT_ID,\n\t\t\tL\"quit\", L\"quit program\");\n\tgui_ptr-\u0026gt;addButton(irr::core::rect\u0026lt;irr::s32\u0026gt;(10,280,110,280 + 32), 0, GUI_BUTTON_NEW_WINDOW_ID,\n\t\t\tL\"New Window\", L\"Launches a new Window\");\n\tgui_ptr-\u0026gt;addButton(irr::core::rect\u0026lt;irr::s32\u0026gt;(10,320,110,320 + 32), 0, GUI_BUTTON_OPEN_FILE_ID,\n\t\t\tL\"File Open\", L\"Opens a file\");\n\n\t//增加一個 靜態文本框\n\tgui_ptr-\u0026gt;addStaticText(L\"Transparent Control:\", irr::core::rect\u0026lt;irr::s32\u0026gt;(150,20,350,40), true);\n\t\n\t//增加一個 滾動條\n\tirr::gui::IGUIScrollBar* scrollbar_ptr\t=\tgui_ptr-\u0026gt;addScrollBar(true,\n\t\tirr::core::rect\u0026lt;irr::s32\u0026gt;(150, 45, 350, 60), 0, GUI_SCROLL_BAR_ID);\n\tscrollbar_ptr-\u0026gt;setMax(255);\n\tscrollbar_ptr-\u0026gt;setPos(255);\n\n\t//改變gui透明度\n\tsetSkinTransparency( scrollbar_ptr-\u0026gt;getPos(), gui_ptr-\u0026gt;getSkin());\n\n\t//增加一個 輸入文本框\n\tgui_ptr-\u0026gt;addEditBox(L\"Editable Text\", irr::core::rect\u0026lt;irr::s32\u0026gt;(350, 80, 550, 100));\n\t\n\t\n\tgui_ptr-\u0026gt;addStaticText(L\"Logging ListBox:\", irr::core::rect\u0026lt;irr::s32\u0026gt;(50,110,250,130), true);\n\t//增加 列表\n\tlistbox_ptr\t=\tgui_ptr-\u0026gt;addListBox(irr::core::rect\u0026lt;irr::s32\u0026gt;(50, 140, 250, 210));\n\t\n\t//增加一個 圖像框\n\tgui_ptr-\u0026gt;addImage(driver_ptr-\u0026gt;getTexture(L\"media/irrlichtlogo2.png\"),\n\t\tirr::core::position2d\u0026lt;int\u0026gt;(10,10));\n\t\n\n\twhile(device_ptr-\u0026gt;run()\n\t\t\u0026amp;\u0026amp; driver_ptr)\n\t{\n\t\tif (device_ptr-\u0026gt;isWindowActive())\n\t\t{\n\t\t\tdriver_ptr-\u0026gt;beginScene(true, true,irr::video::SColor(0,200,200,200));\n\n\t\t\tgui_ptr-\u0026gt;drawAll();\n\t\n\t\t\tdriver_ptr-\u0026gt;endScene();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdevice_ptr-\u0026gt;yield();\n\t\t}\n\t}\n\tdevice_ptr-\u0026gt;drop();\n\n\treturn 0;\n}\n\n//設置gui透明\nvoid setSkinTransparency(irr::s32 alpha, irr::gui::IGUISkin* skin)\n{\n\tirr::video::SColor col;\n\tfor (irr::s32 i=0; i\u0026lt;irr::gui::EGDC_COUNT ; ++i)\n\t{\n\t\tcol\t=\tskin-\u0026gt;getColor((irr::gui::EGUI_DEFAULT_COLOR)i);\n\t\tcol.setAlpha(alpha);\n\t\tskin-\u0026gt;setColor((irr::gui::EGUI_DEFAULT_COLOR)i, col);\n\t}\n}\u003c/pre\u003e"