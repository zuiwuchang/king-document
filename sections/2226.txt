var __v="\n\u003cpre class='prettyprint linenums'\u003e#include \u0026lt;boost/progress.hpp\u0026gt;\n#include \u0026lt;vector\u0026gt;\n\n#ifdef _DEBUG\n#pragma comment(lib,\"libtcmalloc_minimal-mdd.lib\")\n#else\n#pragma comment(lib,\"libtcmalloc_minimal-md.lib\")\n#endif\n\n#define PERFTOOLS_DLL_DECL\n#include \u0026lt;tcmalloc/tcmalloc.h\u0026gt;\n\n\n\nvoid test(int count)\n{\n\tboost::progress_timer t;\n\tstd::vector\u0026lt;char*\u0026gt; ptrs(10000);\n\tfor(int j=0;j\u0026lt;count;++j)\n\t{\n\t\tfor(int i=0;i\u0026lt;10000;++i)\n\t\t{\n\t\t\tchar* p = (char*)malloc(1024);\n\t\t\tptrs[i] = p;\n\t\t\t//free(p);\n\t\t}\n\n\t\tfor(int i=0;i\u0026lt;10000;++i)\n\t\t{\n\t\t\tfree(ptrs[i]);\n\t\t}\n\t}\n}\n\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n\ttest(10);\n\tstd::system(\"pause\");\n\treturn 0;\n}\n\u003c/pre\u003e"