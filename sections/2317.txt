var __v="\n\u003cpre class='prettyprint linenums'\u003e$(document).ready(function() {\n\tvar ws = null;\n\t$(\"#btnConn\").click(function(event) {\n\t\n\t\t//連接 服務器 創建 websocket\n\t\tws = new WebSocket(\"ws://127.0.0.1:9000/app/echo\");\n\t\tvar ok = false;\n\t\tws.onopen = function(evt){\n\t\t\tok = true;\n\t\t\talert(\"連接成功\" + ws.readyState)\n\t\t};\n\t\tws.onerror = function(evt){\n\t\t\talert(\"無法連接到服務器\");\n\t\t};\n\t\tws.onclose = function(evt){\n\t\t\tif(ok){\n\t\t\t\talert(\"連接已經斷開\");\n\t\t\t}\n\t\t};\n\n\t\tws.onmessage = function(evt){\n\t\t\t//接收數據\n\t\t\t$(\"#idView\").text(evt.data);\n\t\t};\n\t});\n\t//發送 數據\n\t$(\"#btnSend\").click(function(event) {\n\t\tif(!ws || ws.readyState != 1){\n\t\t\treturn;\n\t\t}\n\t\tvar val = $(\"#valText\").val();\n\t\tws.send(val)\n\t});\n});\u003c/pre\u003e"