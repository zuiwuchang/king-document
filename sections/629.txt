var __v="\u003cpre class=\"prettyprint linenums\"\u003e#include \u0026lt;iostream\u0026gt;\n#include \u0026lt;opencc/opencc.h\u0026gt;\n\nint main()\n{\n    opencc_t cc = opencc_open(OPENCC_DEFAULT_CONFIG_TRAD_TO_SIMP);\n    if((opencc_t)-1 == cc || !cc){\n        std::cout\u0026lt;\u0026lt;\"opencc_open error \\n\";\n        return -1;\n    }\n\n    std::string old = \"this is a 草泥馬 test\";\n    std::size_t size = old.size();\n    //char* str = opencc_convert_utf8(cc,old.data(),size);\n    //opencc_convert_utf8_free(str);\n    char* buf = new char[size + 1];\n    std::size_t n = opencc_convert_utf8_to_buffer(cc,old.data(),size,buf);\n    std::string str(buf,n);\n    delete buf;\n    std::cout\u0026lt;\u0026lt;str\u0026lt;\u0026lt;\"\\n\";\n    opencc_close(cc);\n    return 0;\n}\n\u003c/pre\u003e"