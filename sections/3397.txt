var __v="\u003cimg src='/sections/3397/image/color.PNG' style=\"max-width: 100%;\"\u003e\n\u003cpre class='prettyprint linenums'\u003eIDirect3DVertexBuffer9 *pVertex_buffer\t=\t0;\nD3DXMATRIX matrix1;\nD3DXMATRIX matrix2;\n\nvoid d3dx::Initialization(IDirect3DDevice9* pDevice,int nWidth,int nHeight)\n{\n\t\n\t//創建頂點緩存 索引緩存\n\tpDevice-\u0026gt;CreateVertexBuffer(3 * sizeof(ColorVertex)\n\t\t,D3DUSAGE_WRITEONLY\n\t\t,ColorVertex::FVF\n\t\t,D3DPOOL_MANAGED\n\t\t,\u0026amp;pVertex_buffer\n\t\t,0\n\t\t);\n\t\n\t//建模\n\tColorVertex* pVertex;\n\tpVertex_buffer-\u0026gt;Lock(0\n\t\t,0\n\t\t,(void**)\u0026amp;pVertex\n\t\t,0);\n\n\tpVertex[0]\t=\tColorVertex(-1,0,0,D3DCOLOR_XRGB(255,0,0));\n\tpVertex[1]\t=\tColorVertex(0,1,0,D3DCOLOR_XRGB(0,255,0));\n\tpVertex[2]\t=\tColorVertex(1,0,0,D3DCOLOR_XRGB(0,0,255));\n\n\tpVertex_buffer-\u0026gt;Unlock();\n\t\n\t//計算模型位置\n\tD3DXMatrixTranslation(\u0026amp;matrix1,-2,0,0);\n\tD3DXMatrixTranslation(\u0026amp;matrix2,2,0,0);\n\n\t//設置攝像機\n\tD3DXMATRIX matrix;\n\tD3DXMatrixLookAtLH(\u0026amp;matrix,\u0026amp;camera_position,\u0026amp;target_position,\u0026amp;world_direction);\n\tpDevice-\u0026gt;SetTransform(D3DTS_VIEW,\u0026amp;matrix);\n\n\t//投影矩陣\n\tD3DXMATRIX proj;\n\tD3DXMatrixPerspectiveFovLH(\u0026amp;proj\n\t\t,D3DX_PI * 0.5f\n\t\t,(float)nWidth/(float)(nHeight)\n\t\t,1.0f\n\t\t,1000.0f\n\t\t);\n\tpDevice-\u0026gt;SetTransform(D3DTS_PROJECTION,\u0026amp;proj);\n\t\n\t//禁用光照\n\tpDevice-\u0026gt;SetRenderState(D3DRS_LIGHTING,FALSE);\n}\n\nvoid d3dx::Draw_scene(IDirect3DDevice9* pDevice,float time)\n{\n\t//繪製場景\n\tpDevice-\u0026gt;Clear(0,0,D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER,0xffffffff,1.0f,0);\n\n\tpDevice-\u0026gt;BeginScene();\n\n\tpDevice-\u0026gt;SetStreamSource(0,pVertex_buffer,0,sizeof(ColorVertex));\n\tpDevice-\u0026gt;SetFVF(ColorVertex::FVF);\n\n\t//以 D3DSHADE_FLAT 着色\n\tpDevice-\u0026gt;SetTransform(D3DTS_WORLD, \u0026amp;matrix1);\n\tpDevice-\u0026gt;SetRenderState(D3DRS_SHADEMODE,D3DSHADE_FLAT);\n\tpDevice-\u0026gt;DrawPrimitive(D3DPT_TRIANGLELIST,0,1);\n\n\t//以 D3DSHADE_GOURAUD 着色\n\tpDevice-\u0026gt;SetTransform(D3DTS_WORLD, \u0026amp;matrix2);\n\tpDevice-\u0026gt;SetRenderState(D3DRS_SHADEMODE,D3DSHADE_GOURAUD);\n\tpDevice-\u0026gt;DrawPrimitive(D3DPT_TRIANGLELIST,0,1);\n\n\n\tpDevice-\u0026gt;EndScene();\n\n\tpDevice-\u0026gt;Present(0,0,0,0);\n\n}\u003c/pre\u003e"