var __v="\n\u003cpre class='prettyprint linenums'\u003eHANDLE\thFile\t=\tINVALID_HANDLE_VALUE;\nHANDLE\thMap\t=\tINVALID_HANDLE_VALUE;\nLPVOID\tlp\t\t=\tNULL;\ntry\n{\n\t//創建文件\n\t hFile\t=\tCreateFile(L\"a.txt\"\n\t\t,GENERIC_READ | GENERIC_WRITE\n\t\t,FILE_SHARE_WRITE | FILE_SHARE_READ\n\t\t,NULL\n\t\t,CREATE_ALWAYS\n\t\t,FILE_ATTRIBUTE_NORMAL\n\t\t,NULL\n\t\t);\n\tif(INVALID_HANDLE_VALUE == hFile)\n\t{\n\t\tthrow std::exception(\"創建文件失敗\");\n\t}\n\n\t//映射文件\n\thMap\t=\tCreateFileMapping(hFile\t\t//CreateFile 返回的文件句柄\n\t\t,NULL\t\t\t\t\t\t\t\t//安全描述符\n\t\t,PAGE_READWRITE\t\t\t\t\t\t//內存保護屬性\n\t\t,0\t\t\t\t\t\t\t\t\t//文件大小高32位\n\t\t,12\t\t\t\t\t\t\t\t\t//文件大小低32位\n\t\t,NULL\t\t\t\t\t\t\t\t//全局名稱\n\t\t);\n\tif(INVALID_HANDLE_VALUE == hMap)\n\t{\n\t\tthrow std::exception(\"映射文件失敗\");\n\t}\n\n\t//獲取指針\n\tlp=MapViewOfFile(hMap\n\t\t,FILE_MAP_ALL_ACCESS\t\t//操作權限\n\t\t,0\t\t\t\t\t\t\t//文件偏移高32位\n\t\t,0\t\t\t\t\t\t\t//文件偏移低32位\n\t\t,0\t\t\t\t\t\t\t//映射大小 0 全部\n\t\t);\n\tif(!lp)\n\t{\n\t\tthrow std::exception(\"獲取映射文件操作指針失敗\");\n\t}\n\n\t//操作映射文件\n\tstrcpy_s((char*)lp,10,\"123456\");\n\n}\ncatch(const std::exception\u0026amp; e)\n{\n\tstd::cout\u0026lt;\u0026lt;e.what()\u0026lt;\u0026lt;std::endl;\n}\n\n//釋放文件操作指針\nlp\t\t\u0026amp;\u0026amp;\tUnmapViewOfFile(lp);\n\nINVALID_HANDLE_VALUE != hMap\t\u0026amp;\u0026amp;\tCloseHandle(hMap);\nINVALID_HANDLE_VALUE != hFile\t\u0026amp;\u0026amp;\tCloseHandle(hFile);\u003c/pre\u003e"