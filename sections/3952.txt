var __v="\n\u003cpre class='prettyprint linenums'\u003epackage main\n\nimport (\n\t\"crypto/tls\"\n\t\"log\"\n\t\"net\"\n)\n\nconst (\n\tcertFile = \"server.pem\"\n\tkeyFile  = \"server.key\"\n\tLAddr    = \":1102\"\n)\n\nfunc main() {\n\t//加載 x509 證書\n\tcert, e := tls.LoadX509KeyPair(certFile, keyFile)\n\tif e != nil {\n\t\tlog.Fatalln(e)\n\t}\n\t//配置 tls\n\tcnf := \u0026amp;tls.Config{\n\t\t//配置 證書\n\t\tCertificates: []tls.Certificate{cert},\n\t}\n\n\t//創建服務器\n\tl, e := tls.Listen(\"tcp\", LAddr, cnf)\n\tif e != nil {\n\t\tlog.Fatalln(e)\n\t}\n\t//之後的 操作完全 同 net包\n\tdefer l.Close()\n\tlog.Println(\"tls work at\", LAddr)\n\n\tfor {\n\t\tc, e := l.Accept()\n\t\tif e == nil {\n\t\t\tgo onRead(c)\n\t\t}\n\t}\n}\nfunc onRead(c net.Conn) {\n\tb := make([]byte, 1024)\n\tfor {\n\t\tn, e := c.Read(b)\n\t\tif e != nil {\n\t\t\tbreak\n\t\t}\n\t\t_, e = c.Write(b[:n])\n\t\tif e != nil {\n\t\t\tbreak\n\t\t}\n\t}\n\tc.Close()\n}\n\u003c/pre\u003e"