var __v="\n\u003cpre class='prettyprint linenums'\u003e#!/bin/bash\n#Program:\n#       自動編譯 google's Protocol Buffers 到 go 源碼\n#History:\n#       2018-03-09 king first release\n#Email:\n#       zuiwuchang@gmail.com\n\n# 創建 輸出檔案夾\nfunction mkOutDir(){\n\tif test -d $1 ;then\n\t\treturn\n\tfi\n\t\n\tmkdir -p $1\n\tok=$?\n\tif [[ $ok != 0 ]];then\n\t\texit $ok\n\tfi\n}\n# 查找 pb 檔案\nfunction findPB(){\n\t_f_pb_ctx=`pwd`\n\tcd $1 \u0026amp;\u0026amp; files=`find *.proto -type f` \u0026amp;\u0026amp; cd $_f_pb_ctx\n\tok=$?\n\tif [[ $ok != 0 ]];then\n\t\texit $ok\n\tfi\n}\n# 編譯 pd\nfunction BuildPB(){\n\t#mkOutDir $2\n\t\n\tfindPB $1\n\techo \"protoc -I $1 --go_out=$2\" $files\n\tprotoc -I $1 --go_out=$2 $files\n\tok=$?\n\tif [[ $ok != 0 ]];then\n\t\texit $ok\n\tfi\n}\n\n# 編譯 grpc\nfunction BuildGRPC(){\n\tmkOutDir $2\n\t\n\tfindPB $1\n\techo \"protoc -I $1 --go_out=plugins=grpc:$2\" $files\n\tprotoc -I $1 --go_out=plugins=grpc:$2 $files\n\tok=$?\n\tif [[ $ok != 0 ]];then\n\t\texit $ok\n\tfi\n}\n\n# 編譯 pb\nBuildPB kcproto kcproto/go/kcproto\nBuildPB kcproto/request kcproto/go/kcproto/request\n\n# 編譯 grpc\nBuildGRPC gservice gservice\u003c/pre\u003e"