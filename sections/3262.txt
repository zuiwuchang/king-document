var __v="\n\u003cpre class='prettyprint linenums'\u003eNTSTATUS status;\n\nOBJECT_ATTRIBUTES object_attributes;\n\nIO_STATUS_BLOCK io_status;\n\nHANDLE handle_file;\nUNICODE_STRING file_symbol;\n//初始化文件符号名 或者用设备名 \\device\\harddiskvolume1\\test.txt\nRtlInitUnicodeString(\u0026amp;file_symbol,L\"\\\\??\\\\c:\\\\test.txt\");\n\n//初始化设备属性\nInitializeObjectAttributes(\u0026amp;object_attributes,\u0026amp;file_symbol,OBJ_CASE_INSENSITIVE,NULL,NULL);\n\n//创建文件\nstatus=ZwCreateFile(\u0026amp;handle_file,\n\tGENERIC_WRITE,//写\n\t\u0026amp;object_attributes,\n\t\u0026amp;io_status,\n\tNULL,FILE_ATTRIBUTE_NORMAL,FILE_SHARE_READ,\n\tFILE_OPEN_IF,\t//创建文件 FILE_OPEN(打开文件)\n\tFILE_SYNCHRONOUS_IO_NONALERT,NULL,0);\n\nif(STATUS_SUCCESS==status)\n{\n\tKdPrint((\"创建文件成功\\n\"));\n}\nelse\n{\n\tKdPrint((\"创建文件失败\\n\"));\n}\n\n//文件操作\n//......\n\n//关闭文件\nif(STATUS_SUCCESS==status \u0026amp;\u0026amp; STATUS_SUCCESS==ZwClose(handle_file))\n{\n\tKdPrint((\"文件成功关闭\\n\"));\n}\u003c/pre\u003e"