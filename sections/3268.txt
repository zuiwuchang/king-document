var __v="\n\u003cpre class='prettyprint linenums'\u003e//定义写入缓冲区\nUNICODE_STRING buffer;\nRtlInitUnicodeString(\u0026amp;buffer,L\"this is a write test\");\n//length是字节长 非字符长\nbuffer.Buffer[buffer.Length]=0;\nbuffer.Buffer[buffer.Length+1]=0;\n\n//设置写入位置\nLARGE_INTEGER byte_offset;\nbyte_offset.QuadPart=8;\n\n//写文件\nif(STATUS_SUCCESS==ZwWriteFile(handle_file,NULL,NULL,NULL,\u0026amp;io_status,buffer.Buffer,buffer.Length+2,\u0026amp;byte_offset,0))\n{\n\tKdPrint((\"写入文件成功 写入%d个字节\\n\",io_status.Information));\n}\u003c/pre\u003e"