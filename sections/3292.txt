var __v="\u003cpre class=\"k-pre\"\u003e可以注册一个 例程 让系统 每隔指定时间 调用之 DPC 例程需要同时 用到 定时器KTIMER 和 KDPC 两个对象\n\n//初始化  KTIMER\nVOID \n  KeInitializeTimer(\n    IN PKTIMER  Timer\n    );\n//初始化  KDPC\nVOID \n  KeInitializeDpc(\n    IN PRKDPC  Dpc,\n    IN PKDEFERRED_ROUTINE  DeferredRoutine,\t\t//DPC例程\n    IN PVOID  DeferredContext\t\t\t\t\t//传入例程的参数\n    );\n//激活 Timer 每次调用KeSetTimer 只能激活一次DPC例程调用 若要循环 在例程中调用KeSetTimer\nBOOLEAN \n  KeSetTimer(\n    IN PKTIMER  Timer,\n    IN LARGE_INTEGER  DueTime,\t\t//单位 100ns RtlConvertLongToLargeInteger(-10000000) 时间间隔RtlConvertLongToLargeInteger 将long转化为 LARGE_INTEGER\n    IN PKDPC  Dpc OPTIONAL\n    );\nDueTime为正 表示从1601年1月1日经过的时刻 为负表示从现在开始经过的时刻\n    \n//关闭 Timer\nBOOLEAN \n  KeCancelTimer(\n    IN PKTIMER  Timer\n    );\n\u003c/pre\u003e"