var __v="\u003cpre class='prettyprint linenums'\u003eboost::mutex m;\n\nvoid work_thread()\n{\n\tboost::thread_specific_ptr\u0026lt;int\u0026gt; ptr;\n\tptr.reset(new int());\n\n\t++(*ptr);\n\t{\n\t\tboost::mutex::scoped_lock sl(m);\n\t\tstd::cout\u0026lt;\u0026lt;*ptr\u0026lt;\u0026lt;std::endl;\n\t}\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n\tboost::thread_group tg;\n\tfor(int i=0;i\u0026lt;5;++i)\n\t{\n\t\ttg.create_thread(work_thread);\n\t}\n\ttg.join_all();\n\n\tstd::system(\"pause\");\n\treturn 0;\n}\n\u003c/pre\u003e\n\u003cpre class=\"k-pre\"\u003e\u003cstrong\u003e//輸出\u003c/strong\u003e\n1\n1\n1\n1\n1  \n\u003c/pre\u003e"